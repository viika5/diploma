"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[462],{5462:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const a={name:"Registration",data:function(){return{fio:null,login:null,initiator:null,department:null,password:null,password_confirmation:null,initiators:[],departments:[]}},watch:{initiator:function(t){this.getDepartment(t.id)}},methods:{getInitiator:function(){var t=this;axios.get("/api/initiator").then((function(e){t.initiators=e.data}))},getDepartment:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/api/initiator/".concat(e)).then((function(e){t.departments=e.data}))},register:function(){var t=this;axios.get("/sanctum/csrf-cookie").then((function(e){axios.post("/register",{login:t.login,fio:t.fio,initiator:t.initiator.name,department:t.department,password:t.password,password_confirmation:t.password_confirmation}).then((function(e){localStorage.setItem("x_xsrf",e.config.headers["X-XSRF-TOKEN"]),t.$router.push({name:"user.personal"})})).catch((function(t){var e=Object.values(t.data.errors).reduce((function(t,e){return t+(e+"\n")}),"");alert(e)}))}))}},mounted:function(){this.getInitiator(),this.getDepartment()}};const o=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[n("div",{staticClass:"card w-25"},[t._m(0),t._v(" "),n("div",{staticClass:"card-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.fio,expression:"fio"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:"ФИО"},domProps:{value:t.fio},on:{input:function(e){e.target.composing||(t.fio=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:"Логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control mb-3",attrs:{type:"password",placeholder:"Пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password_confirmation,expression:"password_confirmation"}],staticClass:"form-control mb-3",attrs:{type:"password",placeholder:"Потверждение"},domProps:{value:t.password_confirmation},on:{input:function(e){e.target.composing||(t.password_confirmation=e.target.value)}}}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.initiator,expression:"initiator"}],staticClass:"form-select mb-3",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.initiator=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"null",selected:""}},[t._v("Выберитие инициатора заявок (ИЗ)")]),t._v(" "),t._l(t.initiators,(function(e){return n("option",{domProps:{value:e}},[t._v(t._s(e.name))])}))],2),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.department,expression:"department"}],staticClass:"form-select mb-3",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.department=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"null"}},[t._v("Выберитие подразделение ИЗ")]),t._v(" "),t._l(t.departments,(function(e){return n("option",{domProps:{value:e.name}},[t._v(t._s(e.name))])}))],2),t._v(" "),n("input",{staticClass:"btn btn-success",attrs:{type:"submit",value:"Регистрация"},on:{click:function(e){return e.preventDefault(),t.register.apply(null,arguments)}}})])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header"},[n("h3",[t._v("Регистрация")])])}],!1,null,"3cc2ed11",null).exports}}]);